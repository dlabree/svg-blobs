<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

  <title>blob4</title>
  <script src="js/svg.js"></script>
  <script src="js/svg.easing.min.js"></script>
  <style type="text/css">
  body {background:#000000;}
  #logo {top:30px; left:30px; position:absolute; opacity:0.5;}
  #drawing1 {width:100%; height:100%; }
  #drawing1 svg {width:100%; height:100%;}
  </style>

</head>
<body>
  <!--div id="logo"><img src="img/dlab.svg" /></div-->
  <div id="drawing1"></div>



<script>

if (SVG.supported) {


  var draw1 = SVG('drawing1');
  var objects = {
    "path1": {
      "state": ["M445.667,255.667 C413,257,423.681,280.31,395.962,269.97 C367.145,259.22,386.369,219.461,355,211 c-32.762-8.838-94.667,31.402-94.667,65.333 c0,33.934,45.977,72.32,79.91,72.32 c11.538,0,26.901-11.935,49.901-0.185 c19.888,10.16,25.861,34.197,56.855,34.197 c33.934,0,44-17.733,44-51.667C490.999,297.065,479.572,254.284,445.667,255.667z",
      "M458.909,271.869 c-11.537,0-37.19,34.686-64.909,24.346 c-28.817-10.75-27.631-56.087-59-64.548 c-32.762-8.838-59,41.735-59,75.667 c0,33.934,32.562,63.915,64.333,52 c26.667-10,32.667-10.75,55.667,1 c19.888,10.16,10.673,45,41.667,45 c33.934,0,57-41.066,57-75 C494.667,296.4,492.843,271.869,458.909,271.869z"],
      "fill": "#1B4693",
      "opacity": "0.5",
      "flag" : "off"
      },
    

    "path2": {
      "state": ["M328.5,364.5 c-8.333,41.837-11.346,75.729-47.849,79 c-35.271,3.16-34.859-54.574-39.469-88.745 c-4.537-33.628,19.981-96.366,55.484-88.755 S336.457,324.557,328.5,364.5z",
        "M374.271,355.163 c-8.333,41.837-24.938,58.171-61.441,61.44 c-35.271,3.16-56.83-27.271-61.44-61.44 c-4.537-33.628,25.937-69.051,61.44-61.44 S348.333,301.334,382.228,315.22,374.271,355.163z"],
      "fill": "#BC1F46",
      "opacity": "0.8",
      "flag" : "off"
      }
    
    }
  var path1 = draw1.path();
  var path2 = draw1.path();
  var path3 = draw1.path();
  var path4 = draw1.path();

  
  console.log(objects.path1.state[0]);

  path1.plot(objects.path1.state[0]).fill(objects.path1.fill).opacity(objects.path1.opacity).attr('class', 'p1').click(doStuff1);

  path1loop();
    
  

  path2.plot(objects.path2.state[0]).fill(objects.path2.fill).opacity(objects.path2.opacity).attr('class', 'p2').click(doStuff2);
    
  path2.animate(2000).plot(objects.path2.state[1]).transform({ x: -10, y:-50, relative: true }).loop(true, true);


  function doStuff1() {
    var element = SVG.select('path.p1');

    if (objects.path1.flag == "off") {
      objects.path1.flag = "on";
  element.opacity(1);
      //element.animate(1000, 'swingTo').transform({ rotation: 180 }).animate(1000, 'swingTo').transform({ x: -200, relative: true, y:-200, relative: true });
    }
    else {
      objects.path1.flag = "off";
      // NOT YET WORKING - NEED TO FIND A WAY TO ANIMATE IF ALREADY ANIMATING??? NESTED ELEMENTS PERHAPS... 
      element.animate(1000, 'swingFrom').transform({ rotation: 0 }).animate(1000, 'swingTo').transform({ x: -200, relative: true, y:-200, relative: true });
    }
  }

  function doStuff2() {
    var element = SVG.select('path.p2');

    if (objects.path2.flag == "off") {
      objects.path2.flag = "on";
      element.animate(1000, 'swingFrom').transform({ x: -50, relative: true, y:-50, relative: true });
    }
    else {
      objects.path2.flag = "off";
      element.animate(1000, 'swingFrom').transform({ x: 50, relative: true, y:50, relative: true });
    }
  }


  function path1loop() {

    path1.animate(2000).plot(objects.path1.state[1]).transform({ x: 20, y: -100, relative: true }).animate(2000).plot(objects.path1.state[0]).transform({ x: -30, y: -150, relative: true }).animate(2000).plot(objects.path1.state[1]).transform({ x: -20, y: 100, relative: true }).animate(2000).plot(objects.path1.state[1]).transform({ x: 30, y: 150, relative: true }).after(path1loop);


  }



} else {
  alert('SVG not supported')
}

</script>


</body>

</html>
